var ROSCONSOLE=ROSCONSOLE||{REVISION:"0.0.1"};ROSCONSOLE.isMobile=function(){var a={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()}};return a},ROSCONSOLE.controller=function(a){a=a||{};var b=a.addr||"localhost",c=a.port||"9090",d=a.fixed_frame||"/odom",e=$('[data-role="header"]').css("background-color"),f=new ROSLIB.Ros;f.on("connection",function(a){$('[data-role="header"]').css("background-color",e)}),f.on("error",function(a){$('[data-role="header"]').css("background-color","rgba(255,0,0,0.5)")}),f.connect("ws://"+b+":"+c),f.on("close",function(a){});var g=new ROSLIB.TFClient({ros:f,angularThres:.01,transThres:.01,rate:20,fixedFrame:d});return{ros:f,tfClient:g}},ROSCONSOLE.ROS3Dmap=function(a){a=a||{};var b=a.ros,c=a.tfClient,d=a.viewer,e=(a.width||200,a.height||200,a.path||"localhost");d.addObject(new ROS3D.Grid({size:20,cellSize:1}));new ROS3D.UrdfClient({ros:b,tfClient:c,path:"http://"+e+"/",rootObject:d.scene,loader:ROS3D.STL_LOADER}),new ROS3D.OccupancyGridClient({ros:b,rootObject:d.scene,tfClient:c,continuous:!0}),new ROS3D.InteractiveMarkerClient({ros:b,tfClient:c,topic:"/twist_marker_server",camera:d.camera,rootObject:d.selectableObjects})},ROSCONSOLE.WindowController=function(a){var b='<div data-role="header" data-theme="a" data-position="fixed">';b+="<h1>"+a+"</h1>",ROSCONSOLE.isMobile().any()&&(b+='<a href="#menu" class="ui-btn ui-icon-bars ui-btn-icon-notext ui-corner-all">No text</a>'),b+='<a href="/Codiad" class="ui-btn ui-icon-edit ui-btn-right ui-btn-icon-notext ui-corner-all" target="_blank">No text</a>',b+="</div>",$(b).prependTo("body").enhanceWithin(),ROSCONSOLE.build_menu(),$('[data-role="header"], [data-role="footer"]').toolbar({position:"fixed",tapToggle:!1}),$("[data-role=panel]").panel().enhanceWithin(),$.mobile.resetActivePageHeight(),$('[data-role="navbar"] a:first').addClass("ui-btn-active"),$(document).on("pageshow",'[data-role="page"]',function(){var a=$(this).jqmData("title");$('[data-role="navbar"] a.ui-btn-active').removeClass("ui-btn-active"),$('[data-role="navbar"] a').each(function(){$(this).text()===a&&($(this).addClass("ui-btn-active"),$("#navbar").trigger("page",a))})})},ROSCONSOLE.build_menu=function(){ROSCONSOLE.isMobile().any()?$("body").append('<div data-role="panel" id="menu" data-theme="b" data-display="push"></div>'):$('[data-role="header"]').append('<div data-role="navbar" id="menu"></div>'),$("#menu").append(ROSCONSOLE.pages())},ROSCONSOLE.pages=function(){var a=$('div:jqmData(role="page")'),b="";b=ROSCONSOLE.isMobile().any()?'<ul data-role="listview">':"<ul>";for(var c=0;c<a.length;c++)b+='<li><a href="#'+$(a[c]).attr("id")+'" data-icon="'+$(a[c]).jqmData("icon")+'" data-transition="fade">'+$(a[c]).jqmData("title")+"</a></li>";return b+="</ul>"};